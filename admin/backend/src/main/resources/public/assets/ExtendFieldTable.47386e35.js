var R=Object.defineProperty;var h=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var I=(t,n,l)=>n in t?R(t,n,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[n]=l,x=(t,n)=>{for(var l in n||(n={}))v.call(n,l)&&I(t,l,n[l]);if(h)for(var l of h(n))F.call(n,l)&&I(t,l,n[l]);return t};import{B as _}from"./TableImg.56506859.js";import{T as P}from"./index.3604fdfb.js";import{u as y}from"./useTable.bd2598d0.js";import{c as w,bQ as S,ap as D,a as A,s as T,X as k,ar as u,o as N,h as E,n as m,y as f,z as B,t as O,ad as $,i as q}from"./index.9b68f3a5.js";import{a as V,I as C}from"./inputTypeEnum.e562aefd.js";import{g,v as M}from"./v4.8b5f0c91.js";import{g as Y}from"./contentModel.d81852df.js";const{t:e}=w(),ne=[{title:e("Content.contentModel.id"),dataIndex:"id"},{title:e("Content.contentModel.name"),dataIndex:"name",align:"left"},{title:e("Content.contentModel.description"),dataIndex:"description",align:"left"},{title:e("Content.contentModel.hasChild"),dataIndex:"hasChild",customRender:({record:t})=>t.hasChild?"Y":"N"},{title:e("Content.contentModel.hasImages"),dataIndex:"hasImages",customRender:({record:t})=>t.hasImages?"Y":"N"},{title:e("Content.contentModel.hasFiles"),dataIndex:"hasFiles",customRender:({record:t})=>t.hasFiles?"Y":"N"}],oe=[{field:"id",label:e("Content.contentModel.id"),component:"Input",required:!0,colProps:{span:8}},{field:"name",label:e("Content.contentModel.name"),component:"Input",required:!0,colProps:{span:8}},{field:"description",label:e("Content.contentModel.description"),component:"Input",colProps:{span:8}},{field:"",component:"Divider",label:"",colProps:{span:24}},{field:"hasChild",label:e("Content.contentModel.hasChild"),component:"Checkbox",colProps:{span:3}},{field:"hasImages",label:e("Content.contentModel.hasImages"),component:"Checkbox",colProps:{span:3}},{field:"hasFiles",label:e("Content.contentModel.hasFiles"),component:"Checkbox",colProps:{span:3}},{field:"parentId",label:e("Content.contentModel.parent"),component:"ApiSelect",componentProps:{api:Y,showSearch:!0,optionFilterProp:"label",resultField:"list",labelField:"name",valueField:"id"},colProps:{span:6}},{field:"",component:"Divider",label:"",colProps:{span:24}},{field:"useTitle",label:e("Content.contentModel.title"),component:"Input",colSlot:"title",colProps:{span:5}},{field:"",component:"Divider",label:"",colProps:{span:1}},{field:"useDescription",label:e("Content.contentModel.description"),component:"Input",colSlot:"description",colProps:{span:5}},{field:"",component:"Divider",label:"",colProps:{span:1}},{field:"useCover",label:e("Content.contentModel.cover"),component:"Input",colSlot:"cover",colProps:{span:5}},{field:"",component:"Divider",label:"",colProps:{span:24}},{field:"extend",component:"Input",label:e("Content.cateType.extend"),colSlot:"extend",colProps:{span:24}}],j=Array.from(V,([t,n])=>({label:n,value:t})),z=[{title:e("Content.contentModel.field.id"),dataIndex:"uuid",editComponent:"Input",ifShow:!1},{title:e("Content.contentModel.field.code"),dataIndex:"code",editComponent:"Input",editRow:!0},{title:e("Content.contentModel.field.type"),dataIndex:"inputType",editComponent:"Select",editComponentProps:{options:j},editRow:!0},{title:e("Content.contentModel.field.name"),dataIndex:"name",editRow:!0,editComponent:"Input",align:"left",editRule:!0,width:150},{title:e("Content.contentModel.field.default_value"),dataIndex:"defaultValue",editComponent:"Input",editRow:!0,align:"left"},{title:e("Content.contentModel.field.dict"),dataIndex:"dictionaryId",editComponent:"ApiSelect",editComponentProps:{api:g,resultField:"list",labelField:"name",valueField:"id"},editRow:!0,align:"left",customRender:({record:t})=>t.inputType==C.DICTIONARY?S("ApiSelect",{api:g,resultField:"list",labelField:"name",valueField:"id"}):""},{title:e("Content.contentModel.field.required"),dataIndex:"required",editComponent:"Checkbox",editRow:!0},{title:e("Content.contentModel.field.searchable"),dataIndex:"searchable",editComponent:"Checkbox",editRow:!0},{title:e("Content.contentModel.field.max_length"),dataIndex:"maxlength",editComponent:"InputNumber",editComponentProps:{min:1},editRow:!0,align:"left"},{title:e("Content.contentModel.field.desc"),dataIndex:"description",editComponent:"Textarea",editComponentProps:{autoSize:!0},editRow:!0,align:"left"},{title:e("Content.contentModel.field.sort"),dataIndex:"sort",editComponent:"InputNumber",editRow:!0}],X=A({components:{BasicTable:_,TableAction:P},props:{value:Object},setup(t){const{t:n}=w(),l=T(t.value),s=T(null);k(()=>t.value,o=>{const d=o||[];d.map(i=>{i.inputType=i.inputType?i.inputType:C.TEXT,i.editRow=!0,i.editable=!0,i.uuid=M()}),l.value=d});const[b]=y({title:n("Content.contentModel.field_list"),titleHelpMessage:[n("Content.contentModel.field_list_desc")],dataSource:l,columns:z,showIndexColumn:!1,showTableSetting:!1,tableSetting:{fullScreen:!0},rowKey:"uuid",actionColumn:{width:100,title:n("common.action"),dataIndex:"action",slots:{customRender:"action"},fixed:void 0}});function a(){const o=q(s);if(!o)throw new Error("tableAction is null");return o}function r(){a().insertTableDataRecord({editRow:!0,editable:!0,inputType:C.TEXT,uuid:M()}),$(()=>{const o=a().getDataSource();o[o.length-1].onEdit(!0)})}function c(o){a().deleteTableDataRecord(o.uuid)}function p(){let o=a().getDataSource();return o=o.map(function(d){return x({},d.editValueRefs)}),o}return{t:n,extendFieldTableRef:s,registerTable:b,extendFieldList:l,validate:p,handleDelete:c,addNewField:r}}}),L={class:"p-4"};function H(t,n,l,s,b,a){const r=u("a-button"),c=u("TableAction"),p=u("BasicTable");return N(),E("div",L,[m(p,{onRegister:t.registerTable,ref:"extendFieldTableRef",pagination:!1},{toolbar:f(()=>[m(r,{type:"primary",onClick:t.addNewField},{default:f(()=>[B(O(t.t("Content.contentModel.add_field")),1)]),_:1},8,["onClick"])]),action:f(({record:o})=>[m(c,{actions:[{icon:"ant-design:delete-outlined",color:"error",popConfirm:{title:"Deletion Confirm",confirm:t.handleDelete.bind(null,o)}}]},null,8,["actions"])]),_:1},8,["onRegister"])])}var K=D(X,[["render",H]]),le=Object.freeze(Object.defineProperty({__proto__:null,default:K},Symbol.toStringTag,{value:"Module"}));export{K as E,le as a,ne as c,oe as f};
