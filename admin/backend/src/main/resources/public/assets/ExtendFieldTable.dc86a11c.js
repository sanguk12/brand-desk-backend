var R=Object.defineProperty;var y=Object.getOwnPropertySymbols;var h=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var b=(t,o,n)=>o in t?R(t,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[o]=n,x=(t,o)=>{for(var n in o||(o={}))h.call(o,n)&&b(t,n,o[n]);if(y)for(var n of y(o))S.call(o,n)&&b(t,n,o[n]);return t};import{B as v}from"./TableImg.9ee05584.js";import{T as D}from"./index.26a558af.js";import{u as F}from"./useTable.1012c757.js";import{c as w,ap as A,a as E,s as I,X as N,ar as m,o as k,h as B,n as f,y as T,z as M,t as P,ad as $,i as q}from"./index.f8b6fa94.js";import{a as O,I as g}from"./inputTypeEnum.8d05b9f9.js";import{g as V,v as _}from"./v4.920e6786.js";const{t:e}=w(),ee=[{title:e("Content.cateType.id"),dataIndex:"id"},{title:e("Content.cateType.name"),dataIndex:"name",align:"left"},{title:e("Content.cateType.code"),dataIndex:"code",align:"left"},{title:e("Content.cateType.sort"),dataIndex:"sort"},{title:e("AccessControl.dept.createDate"),dataIndex:"createDate",format:"date|YYYY-MM-DD HH:mm:ss"}],te=[{field:"id",label:e("Content.cateType.id"),component:"Input",show:!1},{field:"name",label:e("Content.cateType.name"),component:"Input",required:!0},{field:"code",label:e("Content.cateType.code"),component:"Input",required:!0},{label:e("Content.cateType.sort"),field:"sort",component:"InputNumber"},{field:"extend",component:"Input",label:e("Content.cateType.extend"),colSlot:"extend",colProps:{span:24}}],Y=Array.from(O,([t,o])=>({label:o,value:t})),j=[{title:e("Content.contentModel.field.id"),dataIndex:"uuid",editComponent:"Input",ifShow:!1},{title:e("Content.cateType.field.type"),dataIndex:"inputType",editComponent:"Select",editComponentProps:{options:Y},editRow:!0},{title:e("Content.cateType.field.name"),dataIndex:"name",editRow:!0,editComponent:"Input",align:"left",editRule:!0,width:150},{title:e("Content.cateType.field.code"),dataIndex:"code",editComponent:"Input",editRow:!0},{title:e("Content.cateType.field.default_value"),dataIndex:"defaultValue",editComponent:"Input",editRow:!0,align:"left"},{title:e("Content.cateType.field.dict"),dataIndex:"dictionaryId",editComponent:"ApiTreeSelect",editComponentProps:{api:V,resultField:"list"},editRow:!0,align:"left"},{title:e("Content.cateType.field.required"),dataIndex:"required",editComponent:"Checkbox",editRow:!0},{title:e("Content.cateType.field.max_length"),dataIndex:"maxlength",editComponent:"InputNumber",editComponentProps:{min:1},editRow:!0,align:"left"},{title:e("Content.cateType.field.desc"),dataIndex:"description",editComponent:"Textarea",editComponentProps:{autoSize:!0},editRow:!0,align:"left"},{title:e("Content.cateType.field.sort"),dataIndex:"sort",editComponent:"InputNumber",editRow:!0}],z=E({components:{BasicTable:v,TableAction:D},props:{value:Object},setup(t,o){const{t:n}=w(),l=I(t.value),c=I(null);N(()=>t.value,a=>{const r=a||[];r.map(d=>{d.inputType=d.inputType?d.inputType:g.TEXT,d.editRow=!0,d.editable=!0,d.uuid=_()}),l.value=r});const[C]=F({title:n("Content.cateType.field_list"),titleHelpMessage:[n("Content.cateType.field_list_desc")],dataSource:l,columns:j,showIndexColumn:!1,showTableSetting:!1,tableSetting:{fullScreen:!0},rowKey:"uuid",actionColumn:{width:100,title:n("common.action"),dataIndex:"action",slots:{customRender:"action"},fixed:void 0}});function i(){const a=q(c);if(!a)throw new Error("tableAction is null");return a}function s(){i().insertTableDataRecord({editRow:!0,editable:!0,inputType:g.TEXT,uuid:_()}),$(()=>{const a=i().getDataSource();a[a.length-1].onEdit(!0)})}function p(a){i().deleteTableDataRecord(a.uuid)}function u(){let a=i().getDataSource();return a=a.map(function(r){return x({},r.editValueRefs)}),a}return{t:n,extendFieldTableRef:c,registerTable:C,extendFieldList:l,validate:u,addNewField:s,handleDelete:p}}}),H={class:"p-4"};function X(t,o,n,l,c,C){const i=m("a-button"),s=m("TableAction"),p=m("BasicTable");return k(),B("div",H,[f(p,{onRegister:t.registerTable,ref:"extendFieldTableRef",pagination:!1},{toolbar:T(()=>[f(i,{type:"primary",onClick:t.addNewField},{default:T(()=>[M(P(t.t("Content.cateType.add_field")),1)]),_:1},8,["onClick"])]),action:T(({record:u})=>[f(s,{actions:[{icon:"ant-design:delete-outlined",color:"error",popConfirm:{title:"Deletion Confirm",confirm:t.handleDelete.bind(null,u)}}]},null,8,["actions"])]),_:1},8,["onRegister"])])}var K=A(z,[["render",X]]),ne=Object.freeze(Object.defineProperty({__proto__:null,default:K},Symbol.toStringTag,{value:"Module"}));export{K as E,ne as a,ee as c,te as f};
