var I=Object.defineProperty;var d=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var f=(e,o,t)=>o in e?I(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,b=(e,o)=>{for(var t in o||(o={}))D.call(o,t)&&f(e,t,o[t]);if(d)for(var t of d(o))_.call(o,t)&&f(e,t,o[t]);return e};var m=(e,o,t)=>new Promise((l,a)=>{var c=n=>{try{s(t.next(n))}catch(r){a(r)}},u=n=>{try{s(t.throw(n))}catch(r){a(r)}},s=n=>n.done?l(n.value):Promise.resolve(n.value).then(c,u);s((t=t.apply(e,o)).next())});import{B as N}from"./BasicForm.eebb9e8d.js";import{u as R}from"./useForm.74156ad2.js";import{bQ as h,b4 as F,a as M,s as x,f as T,i as w,ap as k,ar as g,o as V,j as G,y as $,n as C,as as E}from"./index.f8b6fa94.js";import{T as q}from"./index.e501ff06.js";import{B as L,a as O}from"./index.0631543e.js";import{a as j}from"./system.cc6d32e4.js";const te=[{title:"menu name",dataIndex:"menuName",width:200,align:"left"},{title:"icon",dataIndex:"icon",width:50,customRender:({record:e})=>h(F,{icon:e.icon})},{title:"Permission",dataIndex:"permission",width:180},{title:"components",dataIndex:"component"},{title:"Sort",dataIndex:"orderNo",width:50},{title:"Status",dataIndex:"status",width:80,customRender:({record:e})=>{const t=~~e.status===0,l=t?"green":"red",a=t?"Enabled":"Disabled";return h(q,{color:l},()=>a)}},{title:"creation time",dataIndex:"createTime",width:180}],W=e=>e==="0",v=e=>e==="1",p=e=>e==="2",oe=[{field:"menuName",label:"menu name",component:"Input",colProps:{span:8}},{field:"status",label:"state",component:"Select",componentProps:{options:[{label:"Enabled",value:"0"},{label:"Disabled",value:"1"}]},colProps:{span:8}}],Y=[{field:"type",label:"menu Type",component:"RadioButtonGroup",defaultValue:"0",componentProps:{options:[{label:"content",value:"0"},{label:"menu",value:"1"},{label:"button",value:"2"}]},colProps:{lg:24,md:24}},{field:"menuName",label:"menu name",component:"Input",required:!0},{field:"parentMenu",label:"Parent Menu",component:"TreeSelect",componentProps:{fieldNames:{label:"menuName",key:"id",value:"id"},getPopupContainer:()=>document.body}},{field:"orderNo",label:"Sort",component:"InputNumber",required:!0},{field:"icon",label:"Icon",component:"IconPicker",required:!0,ifShow:({values:e})=>!p(e.type)},{field:"routePath",label:"routing address",component:"Input",required:!0,ifShow:({values:e})=>!p(e.type)},{field:"component",label:"component path",component:"Input",ifShow:({values:e})=>v(e.type)},{field:"permission",label:"Permission",component:"Input",ifShow:({values:e})=>!W(e.type)},{field:"status",label:"Status",component:"RadioButtonGroup",defaultValue:"0",componentProps:{options:[{label:"Enabled",value:"0"},{label:"Disabled",value:"1"}]}},{field:"isExt",label:"Whether external chain",component:"RadioButtonGroup",defaultValue:"0",componentProps:{options:[{label:"no",value:"0"},{label:"Yes",value:"1"}]},ifShow:({values:e})=>!p(e.type)},{field:"keepalive",label:"Whether to cache",component:"RadioButtonGroup",defaultValue:"0",componentProps:{options:[{label:"No",value:"0"},{label:"Yes",value:"1"}]},ifShow:({values:e})=>v(e.type)},{field:"show",label:"whether to display",component:"RadioButtonGroup",defaultValue:"0",componentProps:{options:[{label:"No",value:"0"},{label:"Yes",value:"1"}]},ifShow:({values:e})=>!p(e.type)}],A=M({name:"MenuDrawer",components:{BasicDrawer:L,BasicForm:N},emits:["success","register"],props:{title:String},setup(e,{emit:o}){const t=x(!0),[l,{resetFields:a,setFieldsValue:c,updateSchema:u,validate:s}]=R({labelWidth:100,schemas:Y,showActionButtonGroup:!1,baseColProps:{lg:12,md:24}}),[n,{setDrawerProps:r,closeDrawer:P}]=O(i=>m(this,null,function*(){a(),r({confirmLoading:!1}),t.value=!!(i!=null&&i.isUpdate),w(t)&&c(b({},i.record));const B=yield j();u({field:"parentMenu",componentProps:{treeData:B}})})),S=T(()=>w(t)?"Edit menu":"Add menu");function y(){return m(this,null,function*(){try{const i=yield s();r({confirmLoading:!0}),P(),o("success")}finally{r({confirmLoading:!1})}})}return{registerDrawer:n,registerForm:l,getTitle:S,handleSubmit:y}}});function U(e,o,t,l,a,c){const u=g("BasicForm"),s=g("BasicDrawer");return V(),G(s,E(e.$attrs,{onRegister:e.registerDrawer,showFooter:"",title:e.getTitle,width:"50%",onOk:e.handleSubmit}),{default:$(()=>[C(u,{onRegister:e.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var z=k(A,[["render",U]]),ne=Object.freeze(Object.defineProperty({__proto__:null,default:z},Symbol.toStringTag,{value:"Module"}));export{z as M,ne as a,te as c,oe as s};
