var I=Object.defineProperty;var p=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;var f=(o,s,e)=>s in o?I(o,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[s]=e,A=(o,s)=>{for(var e in s||(s={}))_.call(s,e)&&f(o,e,s[e]);if(p)for(var e of p(s))v.call(s,e)&&f(o,e,s[e]);return o};var m=(o,s,e)=>new Promise((n,a)=>{var u=l=>{try{r(e.next(l))}catch(c){a(c)}},d=l=>{try{r(e.throw(l))}catch(c){a(c)}},r=l=>l.done?n(l.value):Promise.resolve(l.value).then(u,d);r((e=e.apply(o,s)).next())});import{B,a as x}from"./index.b536e7c7.js";import{B as P}from"./BasicForm.90108631.js";import{u as F}from"./useForm.14189227.js";import{c as g,bQ as y,ap as S,a as W,s as k,i as h,f as T,ar as b,o as Y,j as $,y as D,n as O,as as j}from"./index.0a8b89be.js";import{T as q}from"./index.5485e619.js";import{s as L}from"./role.9a97aaf8.js";const{t}=g(),Z=[{title:t("AccessControl.role.id"),dataIndex:"id",width:50},{title:t("AccessControl.role.name"),dataIndex:"name",width:150,align:"left"},{title:t("AccessControl.role.ownsAllRight"),dataIndex:"ownsAllRight",width:120,customRender:({record:o})=>~~o.ownsAllRight===1?"Y":"N"},{title:t("AccessControl.role.showAllModule"),dataIndex:"ownsAllPage",width:120,customRender:({record:o})=>~~o.showAllModule===1?"Y":"N"},{title:t("AccessControl.role.description"),dataIndex:"description"},{title:t("AccessControl.role.status"),dataIndex:"status",customRender:({record:o})=>{const e=~~o.status===1,n=e?"green":"red",a=t(e?"AccessControl.role.enabled":"AccessControl.role.disabled");return y(q,{color:n},()=>a)}},{title:t("AccessControl.role.createDate"),dataIndex:"createDate",format:"date|YYYY-MM-DD HH:mm:ss",width:180}],ee=[{field:"name",label:t("AccessControl.role.name"),component:"Input",colProps:{span:8}},{field:"status",label:t("AccessControl.role.status"),component:"Select",componentProps:{options:[{label:t("AccessControl.role.enabled"),value:1},{label:t("AccessControl.role.disabled"),value:0}]},colProps:{span:8}}],N=[{field:"id",label:t("AccessControl.role.id"),component:"Input",show:!1},{field:"name",label:t("AccessControl.role.name"),labelWidth:200,component:"Input",required:!0},{field:"code",label:t("AccessControl.role.code"),labelWidth:200,component:"Input",required:!0},{field:"status",label:t("AccessControl.role.status"),labelWidth:200,component:"RadioButtonGroup",defaultValue:1,componentProps:{options:[{label:t("AccessControl.role.enabled"),value:1},{label:t("AccessControl.role.disabled"),value:0}]},required:!0},{field:"ownsAllRight",component:"Checkbox",label:t("AccessControl.role.ownsAllRight"),labelWidth:200,colProps:{span:24}},{field:"showAllModule",component:"Checkbox",label:t("AccessControl.role.showAllModule"),labelWidth:200,colProps:{span:24}},{label:t("AccessControl.role.description"),labelWidth:200,field:"description",component:"InputTextArea"}],V=W({name:"RoleModal",components:{BasicModal:B,BasicForm:P},emits:["success","register"],setup(o,{emit:s}){const{t:e}=g(),n=k(!0),[a,{resetFields:u,setFieldsValue:d,validate:r}]=F({labelWidth:100,schemas:N,showActionButtonGroup:!1}),[l,{setModalProps:c,closeModal:C}]=x(i=>m(this,null,function*(){yield u(),c({confirmLoading:!1}),n.value=!!(i!=null&&i.isUpdate),h(n)&&(yield d(A({},i.record)))})),w=T(()=>h(n)?e("AccessControl.role.edit"):e("AccessControl.role.add"));function M(){return m(this,null,function*(){try{const i=yield r();c({confirmLoading:!0});const R=yield L(i);C(),s("success")}finally{c({confirmLoading:!1})}})}return{t:e,registerModal:l,registerForm:a,getTitle:w,handleSubmit:M}}});function G(o,s,e,n,a,u){const d=b("BasicForm"),r=b("BasicModal");return Y(),$(r,j(o.$attrs,{onRegister:o.registerModal,title:o.getTitle,onOk:o.handleSubmit}),{default:D(()=>[O(d,{onRegister:o.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var H=S(V,[["render",G]]),oe=Object.freeze(Object.defineProperty({__proto__:null,default:H},Symbol.toStringTag,{value:"Module"}));export{H as R,oe as a,Z as c,ee as s};
