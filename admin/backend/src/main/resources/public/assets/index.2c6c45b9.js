import{a as X,ac as q,s as f,W as D,f as G,cE as J,X as _,aA as K,ad as b,c4 as Q,M as s,n as d,_ as P,cf as U,V as j,H as Y,aH as Z}from"./index.0a8b89be.js";import{u as $}from"./useSize.d9666d99.js";import{e as ee}from"./eagerComputed.d89357d9.js";var ae=function(){return{prefixCls:String,shape:{type:String,default:"circle"},size:{type:[Number,String,Object],default:function(){return"default"}},src:String,srcset:String,icon:q.any,alt:String,gap:Number,draggable:{type:Boolean,default:void 0},crossOrigin:String,loadError:{type:Function}}},re=X({name:"AAvatar",inheritAttrs:!1,props:ae(),slots:["icon"],setup:function(e,A){var p=A.slots,g=A.attrs,m=f(!0),C=f(!1),h=f(1),S=f(null),y=f(null),W=D("avatar",e),H=W.prefixCls,O=$(),n=G(function(){return e.size==="default"?O.value:e.size}),R=J(),c=ee(function(){if(Y(e.size)==="object"){var r=Z.find(function(t){return R.value[t]}),a=e.size[r];return a}}),T=function(a){return c.value?{width:"".concat(c.value,"px"),height:"".concat(c.value,"px"),lineHeight:"".concat(c.value,"px"),fontSize:"".concat(a?c.value/2:18,"px")}:{}},x=function(){if(!(!S.value||!y.value)){var a=S.value.offsetWidth,t=y.value.offsetWidth;if(a!==0&&t!==0){var l=e.gap,u=l===void 0?4:l;u*2<t&&(h.value=t-u*2<a?(t-u*2)/a:1)}}},k=function(){var a=e.loadError,t=a==null?void 0:a();t!==!1&&(m.value=!1)};return _(function(){return e.src},function(){b(function(){m.value=!0,h.value=1})}),_(function(){return e.gap},function(){b(function(){x()})}),K(function(){b(function(){x(),C.value=!0})}),function(){var r,a,t=e.shape,l=e.src,u=e.alt,N=e.srcset,w=e.draggable,B=e.crossOrigin,o=Q(p,e,"icon"),i=H.value,M=(r={},s(r,"".concat(g.class),!!g.class),s(r,i,!0),s(r,"".concat(i,"-lg"),n.value==="large"),s(r,"".concat(i,"-sm"),n.value==="small"),s(r,"".concat(i,"-").concat(t),t),s(r,"".concat(i,"-image"),l&&m.value),s(r,"".concat(i,"-icon"),o),r),F=typeof n.value=="number"?{width:"".concat(n.value,"px"),height:"".concat(n.value,"px"),lineHeight:"".concat(n.value,"px"),fontSize:o?"".concat(n.value/2,"px"):"18px"}:{},E=(a=p.default)===null||a===void 0?void 0:a.call(p),v;if(l&&m.value)v=d("img",{draggable:w,src:l,srcset:N,onError:k,alt:u,crossorigin:B},null);else if(o)v=o;else if(C.value||h.value!==1){var z="scale(".concat(h.value,") translateX(-50%)"),L={msTransform:z,WebkitTransform:z,transform:z},V=typeof n.value=="number"?{lineHeight:"".concat(n.value,"px")}:{};v=d(U,{onResize:x},{default:function(){return[d("span",{class:"".concat(i,"-string"),ref:S,style:P(P({},V),L)},[E])]}})}else v=d("span",{class:"".concat(i,"-string"),ref:S,style:{opacity:0}},[E]);return d("span",j(j({},g),{},{ref:y,class:M,style:[F,T(!!o),g.style]}),[v])}}}),le=re;export{le as A};
