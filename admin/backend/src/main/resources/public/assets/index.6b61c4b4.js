var f=(o,t,s)=>new Promise((c,n)=>{var d=e=>{try{r(s.next(e))}catch(a){n(a)}},i=e=>{try{r(s.throw(e))}catch(a){n(a)}},r=e=>e.done?c(e.value):Promise.resolve(e.value).then(d,i);r((s=s.apply(o,t)).next())});import{ap as k,a as P,dI as g,r as C,bE as v,f as w,fp as b,ar as m,o as B,j as M,y as u,n as p,m as A,fq as S,z as _}from"./index.0a8b89be.js";import{P as T}from"./index.c388f747.js";import{A as y}from"./index.bacabee8.js";import{S as $}from"./index.b2d27a9d.js";import x from"./CurrentPermissionMode.b49e9589.js";import"./index.61a163e2.js";import"./index.2c6c45b9.js";import"./useSize.d9666d99.js";import"./eagerComputed.d89357d9.js";import"./onMountedOrActivated.b04887f0.js";import"./useWindowSizeFn.64599f54.js";import"./useContentViewHeight.2aaec145.js";import"./ArrowLeftOutlined.e3e0fbfd.js";import"./index.01edd6fb.js";import"./transButton.4e1319c6.js";import"./useFlexGapSupport.4f13b498.js";import"./index.8eadf802.js";const E=P({components:{Space:$,Alert:y,CurrentPermissionMode:x,PageWrapper:T},setup(){const{refreshMenu:o}=g(),t=C(),s=v(),c=w(()=>s.getProjectConfig.permissionMode===S.BACK);function n(d){return f(this,null,function*(){const i="fakeToken"+d;t.setToken(i),t.getUserInfoAction(),o()})}return{RoleEnum:b,refreshMenu:o,switchToken:n,isBackPremissionMode:c}}}),I={class:"mt-4"},N=_(" Permission switching(Please switch the permission mode to background permission mode first): "),V=_(" Get the menu with user id 1 "),W=_(" Get the menu with user id 2 ");function j(o,t,s,c,n,d){const i=m("CurrentPermissionMode"),r=m("Alert"),e=m("a-button"),a=m("Space"),l=m("PageWrapper");return B(),M(l,{title:"Background permission example",contentBackground:"",contentClass:"p-4",content:"At present, two sets of data have been mocked. The id is 1 and 2. The specific menu returned can be viewed in mocksysmenu.ts"},{default:u(()=>[p(i),p(r,{class:"mt-4",type:"info",message:"Click to see the changes in the left menu","show-icon":""}),A("div",I,[N,p(a,null,{default:u(()=>[p(e,{onClick:t[0]||(t[0]=h=>o.switchToken(1)),disabled:!o.isBackPremissionMode},{default:u(()=>[V]),_:1},8,["disabled"]),p(e,{onClick:t[1]||(t[1]=h=>o.switchToken(2)),disabled:!o.isBackPremissionMode},{default:u(()=>[W]),_:1},8,["disabled"])]),_:1})])]),_:1})}var te=k(E,[["render",j],["__scopeId","data-v-45f4e2f2"]]);export{te as default};
