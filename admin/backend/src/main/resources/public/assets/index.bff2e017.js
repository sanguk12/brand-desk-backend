var f=(o,t,s)=>new Promise((c,n)=>{var d=e=>{try{r(s.next(e))}catch(a){n(a)}},i=e=>{try{r(s.throw(e))}catch(a){n(a)}},r=e=>e.done?c(e.value):Promise.resolve(e.value).then(d,i);r((s=s.apply(o,t)).next())});import{ap as k,a as P,dI as g,r as C,bE as v,f as w,fp as b,ar as m,o as B,j as M,y as u,n as p,m as A,fq as S,z as _}from"./index.f8b6fa94.js";import{P as T}from"./index.7cdcb74e.js";import{A as y}from"./index.c3665e07.js";import{S as $}from"./index.a4095fd7.js";import x from"./CurrentPermissionMode.ec927f69.js";import"./index.fd9bf113.js";import"./index.7880b903.js";import"./useSize.3eb1ac1b.js";import"./eagerComputed.d49f1c93.js";import"./onMountedOrActivated.73153770.js";import"./useWindowSizeFn.268c75c1.js";import"./useContentViewHeight.a5b3eda6.js";import"./ArrowLeftOutlined.2c75bf82.js";import"./index.fad130bb.js";import"./transButton.7ec2a071.js";import"./useFlexGapSupport.816f6ec3.js";import"./index.bec743a7.js";const E=P({components:{Space:$,Alert:y,CurrentPermissionMode:x,PageWrapper:T},setup(){const{refreshMenu:o}=g(),t=C(),s=v(),c=w(()=>s.getProjectConfig.permissionMode===S.BACK);function n(d){return f(this,null,function*(){const i="fakeToken"+d;t.setToken(i),t.getUserInfoAction(),o()})}return{RoleEnum:b,refreshMenu:o,switchToken:n,isBackPremissionMode:c}}}),I={class:"mt-4"},N=_(" Permission switching(Please switch the permission mode to background permission mode first): "),V=_(" Get the menu with user id 1 "),W=_(" Get the menu with user id 2 ");function j(o,t,s,c,n,d){const i=m("CurrentPermissionMode"),r=m("Alert"),e=m("a-button"),a=m("Space"),l=m("PageWrapper");return B(),M(l,{title:"Background permission example",contentBackground:"",contentClass:"p-4",content:"At present, two sets of data have been mocked. The id is 1 and 2. The specific menu returned can be viewed in mocksysmenu.ts"},{default:u(()=>[p(i),p(r,{class:"mt-4",type:"info",message:"Click to see the changes in the left menu","show-icon":""}),A("div",I,[N,p(a,null,{default:u(()=>[p(e,{onClick:t[0]||(t[0]=h=>o.switchToken(1)),disabled:!o.isBackPremissionMode},{default:u(()=>[V]),_:1},8,["disabled"]),p(e,{onClick:t[1]||(t[1]=h=>o.switchToken(2)),disabled:!o.isBackPremissionMode},{default:u(()=>[W]),_:1},8,["disabled"])]),_:1})])]),_:1})}var te=k(E,[["render",j],["__scopeId","data-v-45f4e2f2"]]);export{te as default};
